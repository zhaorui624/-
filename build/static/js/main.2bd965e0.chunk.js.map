{"version":3,"sources":["views/login/Login.js","components/sandbox/SideMenu.js","components/sandbox/TopHeader.js","views/sandbox/nopermission/Nopermission.js","views/sandbox/right-manage/RightList.js","views/sandbox/right-manage/RoleList.js","components/user-manage/UserForm.js","views/sandbox/user-manage/UserList.js","components/news-manage/NewsEditor.js","views/sandbox/news-manage/NewsAdd.js","views/sandbox/news-manage/NewsDraft.js","views/sandbox/news-manage/NewsCategory.js","components/publish-manage/NewsPublish.js","views/sandbox/news-manage/NewsUpdate.js","components/sandbox/NewsRouter.js","views/sandbox/home/Home.js","views/sandbox/news-manage/NewsPreview.js","views/sandbox/audit-manage/Audit.js","views/sandbox/audit-manage/AuditList.js","views/sandbox/publish-manage/Unpublished.js","views/sandbox/publish-manage/Published.js","views/sandbox/publish-manage/Sunset.js","views/sandbox/NewsSandBox.js","router/IndexRouter.js","App.js","util/http.js","index.js","views/sandbox/news-manage/News.module.css"],"names":["Login","props","style","background","height","overflow","className","name","onFinish","values","console","log","axios","get","username","password","then","res","data","length","message","error","localStorage","setItem","JSON","stringify","history","push","Item","rules","required","prefix","UserOutlined","placeholder","LockOutlined","type","htmlType","Sider","Layout","SubMenu","Menu","iconList","withRouter","useState","meun","setMeun","useEffect","rights","parse","getItem","role","checkPagePermission","item","pagepermisson","includes","key","selectKeys","location","pathname","openKeys","split","trigger","collapsible","collapsed","display","flex","theme","mode","selectedKeys","defaultOpenKeys","renderMenu","menuList","map","children","icon","title","onClick","Header","setCollapsed","changeCollapsed","roleName","menu","danger","removeItem","replace","padding","MenuUnfoldOutlined","MenuFoldOutlined","float","color","overlay","size","Nopermission","confirm","Modal","Option","Select","UserForm","forwardRef","ref","isDisabled","setisDisabled","isUpdateDisabled","roleId","region","roleObj","checkRegionDisabled","isUpdate","value","checkRoleDisabled","id","layout","label","disabled","regionList","onChange","current","setFieldsValue","roleList","NewsEditor","editorState","setEditorState","marginTop","toolbarClassName","wrapperClassName","editorClassName","onEditorStateChange","onBlur","getContent","draftToHtml","convertToRaw","getCurrentContent","Step","Steps","NewsPublish","columns","dataIndex","render","href","category","dataSource","pagination","pageSize","rowKey","LocalRouterMap","setdataSource","isAddVisible","setisAddVisible","isUpdateVisible","setisUpdateVisible","setroleList","setregionList","setcurrent","setisUpdateDisabled","addForm","useRef","updateForm","list","filter","filters","text","onFilter","roleState","checked","default","handleChange","shape","DeleteOutlined","confirmMethod","EditOutlined","handleUpdate","setTimeout","patch","ExclamationCircleOutlined","onOk","deleteMethod","onCancel","delete","visible","okText","cancelText","validateFields","resetFields","post","catch","err","rightList","setRightList","currentRights","setcurrentRights","currentId","setcurrentId","isModalVisible","setisModalVisible","checkable","checkedKeys","onCheck","checkKeys","checkStrictly","treeData","forEach","content","textAlign","switchMethod","undefined","grade","rightId","setCurrent","categoryList","setCategoryList","formInfo","setformInfo","setContent","User","NewsForm","handleSave","auditState","Date","now","notification","info","description","placement","subTitle","active","labelCol","span","wrapperCol","trim","UploadOutlined","handleCheck","record","onCell","editable","EditableContext","React","createContext","components","body","row","index","Form","useForm","form","component","Provider","cell","restProps","editing","setEditing","inputRef","useContext","focus","toggleEdit","save","a","childNode","margin","onPressEnter","paddingRight","newsInfo","setnewsInfo","match","params","onBack","window","back","column","author","moment","createTime","format","publishTime","publishState","view","star","dangerouslySetInnerHTML","__html","border","categoryId","goBack","handleAudit","handleRervert","handlePublish","NewsRouter","BackRouteList","setBackRouteList","Promise","all","routepermisson","checkRoute","checkUserPermission","path","exact","from","to","Content","NewsSandBox","NProgress","start","done","minHeight","IndexRouter","App","defaults","baseURL","ReactDOM","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.2bd965e0.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Form, Button, Input, message } from 'antd'\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport './Login.css'\r\n// import Particles from 'react-particles-js';\r\nimport axios from 'axios'\r\nexport default function Login(props) {\r\n\r\n    const onFinish = (values) => {\r\n        console.log(values)\r\n\r\n        axios.get(`/users?username=${values.username}&password=${values.password}&roleState=true&_expand=role`).then(res=>{\r\n            console.log(res.data)\r\n            if(res.data.length===0){\r\n                message.error(\"用户名或密码不匹配\")\r\n            }else{\r\n                localStorage.setItem(\"token\",JSON.stringify(res.data[0]))\r\n                props.history.push(\"/\")\r\n            }\r\n        })\r\n    }\r\n    return (\r\n        <div style={{ background: 'rgb(35, 39, 65)', height: \"100%\",overflow:'hidden' }}>\r\n            \r\n            <div className=\"formContainer\">\r\n                <div className=\"logintitle\">全球新闻发布管理系统</div>\r\n                <Form\r\n                    name=\"normal_login\"\r\n                    className=\"login-form\"\r\n                    onFinish={onFinish}\r\n                >\r\n                    <Form.Item\r\n                        name=\"username\"\r\n                        rules={[{ required: true, message: 'Please input your Username!' }]}\r\n                    >\r\n                        <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"password\"\r\n                        rules={[{ required: true, message: 'Please input your Password!' }]}\r\n                    >\r\n                        <Input\r\n                            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                        />\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            登录\r\n                     </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useEffect,useState} from 'react'\r\nimport { Layout, Menu } from 'antd';\r\nimport './index.css'\r\nimport {withRouter} from 'react-router-dom'\r\nimport {\r\n  UserOutlined\r\n} from '@ant-design/icons';\r\nimport axios from 'axios'\r\nconst { Sider } = Layout;\r\nconst { SubMenu } = Menu\r\n\r\n//模拟数组结构\r\n// const  menuList = [\r\n//   {\r\n//     key:\"/home\",\r\n//     title:\"首页\",\r\n//     icon:<UserOutlined />\r\n//   },\r\n//   {\r\n//     key:\"/user-manage\",\r\n//     title:\"用户管理\",\r\n//     icon:<UserOutlined />,\r\n//     children:[\r\n//       {\r\n//         key:\"/user-manage/list\",\r\n//         title:\"用户列表\",\r\n//         icon:<UserOutlined />\r\n//       }\r\n//     ]\r\n//   },\r\n//   {\r\n//     key:\"/right-manage\",\r\n//     title:\"权限管理\",\r\n//     icon:<UserOutlined />,\r\n//     children:[\r\n//       {\r\n//         key:\"/right-manage/role/list\",\r\n//         title:\"角色列表\",\r\n//         icon:<UserOutlined />\r\n//       },\r\n//       {\r\n//         key:\"/right-manage/right/list\",\r\n//         title:\"权限列表\",\r\n//         icon:<UserOutlined />\r\n//       }\r\n//     ]\r\n//   }\r\n// ]\r\nconst iconList = {\r\n  \"/home\":<UserOutlined />,\r\n  \"/user-manage\":<UserOutlined />,\r\n  \"/user-manage/list\":<UserOutlined />,\r\n  \"/right-manage\":<UserOutlined />,\r\n  \"/right-manage/role/list\":<UserOutlined />,\r\n  \"/right-manage/right/list\":<UserOutlined />\r\n  //.......\r\n}\r\n\r\n\r\nfunction SideMenu(props) {\r\n  const [meun, setMeun] = useState([])\r\n  useEffect(()=>{\r\n    axios.get(\"/rights?_embed=children\").then(res=>{\r\n      console.log(res.data)\r\n      setMeun(res.data)\r\n    })\r\n  },[])\r\n\r\n  const {role:{rights}} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n  const checkPagePermission = (item)=>{\r\n    return item.pagepermisson && rights.includes(item.key)\r\n  }\r\n  const renderMenu = (menuList)=>{\r\n    return menuList.map(item=>{\r\n      if(item.children?.length>0 && checkPagePermission(item)){\r\n        return <SubMenu key={item.key} icon={iconList[item.key]} title={item.title}>\r\n           { renderMenu(item.children) }\r\n        </SubMenu>\r\n      }\r\n\r\n      return checkPagePermission(item) && <Menu.Item key={item.key} icon={iconList[item.key]}  onClick={()=>{\r\n        //  console.log(props)\r\n        props.history.push(item.key)\r\n      }}>{item.title}</Menu.Item>\r\n    })\r\n  }\r\n\r\n  // console.log(props.location.pathname)\r\n  const selectKeys = [props.location.pathname]\r\n  const openKeys = [\"/\"+props.location.pathname.split(\"/\")[1]]\r\n  return (\r\n    <Sider trigger={null} collapsible collapsed={false} >\r\n      <div style={{display:\"flex\",height:\"100%\",\"flexDirection\":\"column\"}}>\r\n        <div className=\"logo\" >全球新闻发布管理系统</div>\r\n        <div style={{flex:1,\"overflow\":\"auto\"}}>\r\n          <Menu theme=\"dark\" mode=\"inline\" selectedKeys={selectKeys} className=\"aaaaaaa\" defaultOpenKeys={openKeys}>\r\n              {renderMenu(meun)}\r\n          </Menu>\r\n        </div>\r\n      </div>\r\n    </Sider>\r\n  )\r\n}\r\nexport default withRouter(SideMenu)","import React, { useState } from 'react'\r\nimport { Layout, Dropdown,Menu ,Avatar} from 'antd';\r\nimport {\r\n    MenuUnfoldOutlined,\r\n    MenuFoldOutlined,\r\n    UserOutlined\r\n} from '@ant-design/icons';\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nconst { Header } = Layout;\r\n\r\nfunction TopHeader(props) {\r\n    const [collapsed, setCollapsed] = useState(false)\r\n    const changeCollapsed = () => {\r\n        setCollapsed(!collapsed)\r\n    }\r\n\r\n    const {role:{roleName},username} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n    const menu = (\r\n        <Menu>\r\n            <Menu.Item>\r\n                {roleName}\r\n            </Menu.Item>\r\n            <Menu.Item danger onClick={()=>{\r\n                localStorage.removeItem(\"token\")\r\n                // console.log(props.history)\r\n                props.history.replace(\"/login\")\r\n            }}>退出</Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <Header className=\"site-layout-background\" style={{ padding: '0 16px' }}>\r\n            {\r\n                collapsed ? <MenuUnfoldOutlined onClick={changeCollapsed} /> : <MenuFoldOutlined onClick={changeCollapsed} />\r\n            }\r\n\r\n            <div style={{ float: \"right\" }}>\r\n                <span>欢迎<span style={{color:\"#1890ff\"}}>{username}</span>回来</span>\r\n                <Dropdown overlay={menu}>\r\n                    <Avatar size=\"large\" icon={<UserOutlined />} />\r\n                </Dropdown>\r\n            </div>\r\n        </Header>\r\n\r\n    )\r\n}\r\nexport default withRouter(TopHeader)","import React from 'react'\r\n\r\nexport default function Nopermission() {\r\n    return (\r\n        <div>\r\n           403  Nopermission\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Table, Tag, Modal,Popover, Switch} from 'antd'\r\nimport axios from 'axios'\r\nimport { DeleteOutlined, EditOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nconst { confirm } = Modal\r\nexport default function RightList() {\r\n    const [dataSource, setdataSource] = useState([])\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/rights?_embed=children\").then(res => {\r\n            const list = res.data\r\n\r\n            list.forEach(item => {\r\n                if (item.children.length === 0) {\r\n                    item.children = \"\"\r\n                }\r\n            })\r\n            setdataSource(list)\r\n        })\r\n    }, [])\r\n\r\n    const columns = [\r\n        {\r\n            title: 'ID',\r\n            dataIndex: 'id',\r\n            render: (id) => {\r\n                return <b>{id}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '权限名称',\r\n            dataIndex: 'title'\r\n        },\r\n        {\r\n            title: \"权限路径\",\r\n            dataIndex: 'key',\r\n            render: (key) => {\r\n                return <Tag color=\"orange\">{key}</Tag>\r\n            }\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button danger shape=\"circle\" icon={<DeleteOutlined />} onClick={() => confirmMethod(item)} />\r\n                    \r\n                    <Popover content={<div style={{textAlign:\"center\"}}>\r\n                        <Switch checked={item.pagepermisson} onChange={()=>switchMethod(item)}></Switch>\r\n                    </div>} title=\"页面配置项\" trigger={item.pagepermisson===undefined?'':'click'}>\r\n                        <Button type=\"primary\" shape=\"circle\" icon={<EditOutlined />} disabled={item.pagepermisson===undefined}/>\r\n                    </Popover>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n    const  switchMethod = (item)=>{\r\n        item.pagepermisson = item.pagepermisson===1?0:1\r\n        // console.log(item)\r\n        setdataSource([...dataSource])\r\n\r\n        if(item.grade===1){\r\n            axios.patch(`/rights/${item.id}`,{\r\n                pagepermisson:item.pagepermisson\r\n            })\r\n        }else{\r\n            axios.patch(`/children/${item.id}`,{\r\n                pagepermisson:item.pagepermisson\r\n            })\r\n        }\r\n    }\r\n\r\n    const confirmMethod = (item) => {\r\n        confirm({\r\n            title: '你确定要删除?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: 'Some descriptions',\r\n            onOk() {\r\n                //   console.log('OK');\r\n                deleteMethod(item)\r\n            },\r\n            onCancel() {\r\n                //   console.log('Cancel');\r\n            },\r\n        });\r\n\r\n    }\r\n    //删除\r\n    const deleteMethod = (item) => {\r\n        // console.log(item)\r\n        // 当前页面同步状态 + 后端同步\r\n        if (item.grade === 1) {\r\n            setdataSource(dataSource.filter(data => data.id !== item.id))\r\n            axios.delete(`/rights/${item.id}`)\r\n        }else{\r\n            let list = dataSource.filter(data=>data.id===item.rightId)\r\n            list[0].children = list[0].children.filter(data=>data.id!==item.id)\r\n            setdataSource([...dataSource])\r\n            axios.delete(`/children/${item.id}`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Table dataSource={dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Modal,Tree } from 'antd'\r\nimport axios from 'axios'\r\nimport { DeleteOutlined, EditOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nconst { confirm } = Modal\r\nexport default function RoleList() {\r\n    const [dataSource, setdataSource] = useState([])\r\n    const [rightList, setRightList] = useState([])\r\n    const [currentRights, setcurrentRights] = useState([])\r\n    const [currentId, setcurrentId] = useState(0)\r\n    const [isModalVisible, setisModalVisible] = useState(false)\r\n    const columns = [\r\n        {\r\n            title: 'ID',\r\n            dataIndex: 'id',\r\n            render: (id) => {\r\n                return <b>{id}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '角色名称',\r\n            dataIndex: 'roleName'\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button danger shape=\"circle\" icon={<DeleteOutlined />} onClick={() => confirmMethod(item)} />\r\n                    <Button type=\"primary\" shape=\"circle\" icon={<EditOutlined />} onClick={()=>{\r\n                        setisModalVisible(true)\r\n                        setcurrentRights(item.rights)\r\n                        setcurrentId(item.id)\r\n                    }}/>\r\n                </div>\r\n            }\r\n        }\r\n    ]\r\n\r\n    const confirmMethod = (item) => {\r\n        confirm({\r\n            title: '你确定要删除?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: 'Some descriptions',\r\n            onOk() {\r\n                //   console.log('OK');\r\n                deleteMethod(item)\r\n            },\r\n            onCancel() {\r\n                //   console.log('Cancel');\r\n            },\r\n        });\r\n\r\n    }\r\n    //删除\r\n    const deleteMethod = (item) => {\r\n        // console.log(item)\r\n        setdataSource(dataSource.filter(data => data.id !== item.id))\r\n        axios.delete(`/roles/${item.id}`)\r\n    }\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/roles\").then(res => {\r\n            // console.log(res.data)\r\n            setdataSource(res.data)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/rights?_embed=children\").then(res => {\r\n            // console.log(res.data)\r\n            setRightList(res.data)\r\n        })\r\n    }, [])\r\n\r\n\r\n\r\n    const handleOk = ()=>{\r\n        console.log(currentRights,currentId)\r\n        setisModalVisible(false)\r\n        //同步datasource\r\n        setdataSource(dataSource.map(item=>{\r\n            if(item.id===currentId){\r\n                return {\r\n                    ...item,\r\n                    rights:currentRights\r\n                }\r\n            }\r\n            return item\r\n        }))\r\n        //patch\r\n\r\n        axios.patch(`/roles/${currentId}`,{\r\n            rights:currentRights\r\n        })\r\n    }\r\n\r\n    const handleCancel  =()=>{\r\n        setisModalVisible(false)\r\n    }\r\n\r\n    const onCheck = (checkKeys)=>{\r\n        // console.log(checkKeys)\r\n        setcurrentRights(checkKeys.checked)\r\n    }\r\n    return (\r\n        <div>\r\n            <Table dataSource={dataSource} columns={columns}\r\n                rowKey={(item) => item.id}></Table>\r\n\r\n            <Modal title=\"权限分配\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\r\n            <Tree\r\n                checkable\r\n                checkedKeys = {currentRights}\r\n                onCheck={onCheck}\r\n                checkStrictly = {true}\r\n                treeData={rightList}\r\n            />\r\n\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { forwardRef,useEffect,useState } from 'react'\r\nimport {Form,Input,Select} from 'antd'\r\nconst {Option}  = Select\r\nconst UserForm = forwardRef((props,ref) => {\r\n    const [isDisabled, setisDisabled] = useState(false)\r\n    \r\n    useEffect(()=>{\r\n        setisDisabled(props.isUpdateDisabled)\r\n    },[props.isUpdateDisabled])\r\n\r\n    const {roleId,region}  = JSON.parse(localStorage.getItem(\"token\"))\r\n    const roleObj = {\r\n        \"1\":\"superadmin\",\r\n        \"2\":\"admin\",\r\n        \"3\":\"editor\"\r\n    }\r\n    const checkRegionDisabled = (item)=>{\r\n        if(props.isUpdate){\r\n            if(roleObj[roleId]===\"superadmin\"){\r\n                return false\r\n            }else{\r\n                return true\r\n            }\r\n        }else{\r\n            if(roleObj[roleId]===\"superadmin\"){\r\n                return false\r\n            }else{\r\n                return item.value!==region\r\n            }\r\n        }\r\n    }\r\n\r\n    const checkRoleDisabled = (item)=>{\r\n        if(props.isUpdate){\r\n            if(roleObj[roleId]===\"superadmin\"){\r\n                return false\r\n            }else{\r\n                return true\r\n            }\r\n        }else{\r\n            if(roleObj[roleId]===\"superadmin\"){\r\n                return false\r\n            }else{\r\n                return roleObj[item.id]!==\"editor\"\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form\r\n            ref={ref}\r\n            layout=\"vertical\"\r\n        >\r\n            <Form.Item\r\n                name=\"username\"\r\n                label=\"用户名\"\r\n                rules={[{ required: true, message: 'Please input the title of collection!' }]}\r\n            >\r\n                <Input />\r\n            </Form.Item>\r\n            <Form.Item\r\n                name=\"password\"\r\n                label=\"密码\"\r\n                rules={[{ required: true, message: 'Please input the title of collection!' }]}\r\n            >\r\n                <Input />\r\n            </Form.Item>\r\n            <Form.Item\r\n                name=\"region\"\r\n                label=\"区域\"\r\n                rules={isDisabled?[]:[{ required: true, message: 'Please input the title of collection!' }]}\r\n            >\r\n                <Select disabled={isDisabled}>\r\n                    {\r\n                        props.regionList.map(item =>\r\n                            <Option value={item.value} key={item.id} disabled={checkRegionDisabled(item)}>{item.title}</Option>\r\n                        )\r\n                    }\r\n                </Select>\r\n            </Form.Item>\r\n            <Form.Item\r\n                name=\"roleId\"\r\n                label=\"角色\"\r\n                rules={[{ required: true, message: 'Please input the title of collection!' }]}\r\n            >\r\n                <Select onChange={(value)=>{\r\n                    // console.log(value)\r\n                    if(value === 1){\r\n                        setisDisabled(true)\r\n                        ref.current.setFieldsValue({\r\n                            region:\"\"\r\n                        })\r\n                    }else{\r\n                        setisDisabled(false)\r\n                    }\r\n                }}>\r\n                    {\r\n                        props.roleList.map(item =>\r\n                            <Option value={item.id} key={item.id} disabled={checkRoleDisabled(item)}>{item.roleName}</Option>\r\n                        )\r\n                    }\r\n                </Select>\r\n            </Form.Item>\r\n        </Form>\r\n    )\r\n})\r\nexport default UserForm","import React, { useState, useEffect, useRef } from 'react'\r\nimport { Button, Table, Modal, Switch } from 'antd'\r\nimport axios from 'axios'\r\nimport { DeleteOutlined, EditOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nimport UserForm from '../../../components/user-manage/UserForm'\r\nconst { confirm } = Modal\r\n\r\nexport default function UserList() {\r\n    const [dataSource, setdataSource] = useState([])\r\n    const [isAddVisible, setisAddVisible] = useState(false)\r\n    const [isUpdateVisible, setisUpdateVisible] = useState(false)\r\n    const [roleList, setroleList] = useState([])\r\n    const [regionList, setregionList] = useState([])\r\n    const [current, setcurrent] = useState(null)\r\n\r\n    const [isUpdateDisabled, setisUpdateDisabled] = useState(false)\r\n    const addForm = useRef(null)\r\n    const updateForm = useRef(null)\r\n    \r\n    const {roleId,region,username}  = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n    useEffect(() => {\r\n        const roleObj = {\r\n            \"1\":\"superadmin\",\r\n            \"2\":\"admin\",\r\n            \"3\":\"editor\"\r\n        }\r\n        axios.get(\"/users?_expand=role\").then(res => {\r\n            const list = res.data\r\n            setdataSource(roleObj[roleId]===\"superadmin\"?list:[\r\n                ...list.filter(item=>item.username===username),\r\n                ...list.filter(item=>item.region===region&& roleObj[item.roleId]===\"editor\")\r\n            ])\r\n        })\r\n    }, [roleId,region,username])\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/regions\").then(res => {\r\n            const list = res.data\r\n            setregionList(list)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/roles\").then(res => {\r\n            const list = res.data\r\n            setroleList(list)\r\n        })\r\n    }, [])\r\n\r\n    const columns = [\r\n        {\r\n            title: '区域',\r\n            dataIndex: 'region',\r\n            filters: [\r\n                ...regionList.map(item=>({\r\n                    text:item.title,\r\n                    value:item.value\r\n                })),\r\n                {\r\n                    text:\"全球\",\r\n                    value:\"全球\"\r\n                }    \r\n\r\n            ],\r\n\r\n            onFilter:(value,item)=>{\r\n                if(value===\"全球\"){\r\n                    return item.region===\"\"\r\n                }\r\n                return item.region===value\r\n            },\r\n          \r\n            render: (region) => {\r\n                return <b>{region === \"\" ? '全球' : region}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '角色名称',\r\n            dataIndex: 'role',\r\n            render: (role) => {\r\n                return role?.roleName\r\n            }\r\n        },\r\n        {\r\n            title: \"用户名\",\r\n            dataIndex: 'username'\r\n        },\r\n        {\r\n            title: \"用户状态\",\r\n            dataIndex: 'roleState',\r\n            render: (roleState, item) => {\r\n                return <Switch checked={roleState} disabled={item.default} onChange={()=>handleChange(item)}></Switch>\r\n            }\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button danger shape=\"circle\" icon={<DeleteOutlined />} onClick={() => confirmMethod(item)} disabled={item.default} />\r\n\r\n                    <Button type=\"primary\" shape=\"circle\" icon={<EditOutlined />} disabled={item.default} onClick={()=>handleUpdate(item)}/>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n    const handleUpdate = (item)=>{\r\n        setTimeout(()=>{\r\n            setisUpdateVisible(true)\r\n            if(item.roleId===1){\r\n                //禁用\r\n                setisUpdateDisabled(true)\r\n            }else{\r\n                //取消禁用\r\n                setisUpdateDisabled(false)\r\n            }\r\n            updateForm.current.setFieldsValue(item)\r\n        },0)\r\n\r\n        setcurrent(item)\r\n    }\r\n\r\n    const handleChange = (item)=>{\r\n        // console.log(item)\r\n        item.roleState = !item.roleState\r\n        setdataSource([...dataSource])\r\n\r\n        axios.patch(`/users/${item.id}`,{\r\n            roleState:item.roleState\r\n        })\r\n    }\r\n\r\n    const confirmMethod = (item) => {\r\n        confirm({\r\n            title: '你确定要删除?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: 'Some descriptions',\r\n            onOk() {\r\n                //   console.log('OK');\r\n                deleteMethod(item)\r\n            },\r\n            onCancel() {\r\n                //   console.log('Cancel');\r\n            },\r\n        });\r\n\r\n    }\r\n    //删除\r\n    const deleteMethod = (item) => {\r\n        // console.log(item)\r\n        // 当前页面同步状态 + 后端同步\r\n\r\n        setdataSource(dataSource.filter(data=>data.id!==item.id))\r\n\r\n        axios.delete(`/users/${item.id}`)\r\n    }\r\n\r\n    const addFormOK = () => {\r\n        addForm.current.validateFields().then(value => {\r\n            // console.log(value)\r\n\r\n            setisAddVisible(false)\r\n\r\n            addForm.current.resetFields()\r\n            //post到后端，生成id，再设置 datasource, 方便后面的删除和更新\r\n            axios.post(`/users`, {\r\n                ...value,\r\n                \"roleState\": true,\r\n                \"default\": false,\r\n            }).then(res=>{\r\n                console.log(res.data)\r\n                setdataSource([...dataSource,{\r\n                    ...res.data,\r\n                    role:roleList.filter(item=>item.id===value.roleId)[0]\r\n                }])\r\n            })\r\n        }).catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const updateFormOK = ()=>{\r\n        updateForm.current.validateFields().then(value => {\r\n            // console.log(value)\r\n            setisUpdateVisible(false)\r\n\r\n            setdataSource(dataSource.map(item=>{\r\n                if(item.id===current.id){\r\n                    return {\r\n                        ...item,\r\n                        ...value,\r\n                        role:roleList.filter(data=>data.id===value.roleId)[0]\r\n                    }\r\n                }\r\n                return item\r\n            }))\r\n            setisUpdateDisabled(!isUpdateDisabled)\r\n\r\n            axios.patch(`/users/${current.id}`,value)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button type=\"primary\" onClick={() => {\r\n                setisAddVisible(true)\r\n            }}>添加用户</Button>\r\n            <Table dataSource={dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }}\r\n                rowKey={item => item.id}\r\n            />\r\n\r\n            <Modal\r\n                visible={isAddVisible}\r\n                title=\"添加用户\"\r\n                okText=\"确定\"\r\n                cancelText=\"取消\"\r\n                onCancel={() => {\r\n                    setisAddVisible(false)\r\n                }}\r\n                onOk={() => addFormOK()}\r\n            >\r\n                <UserForm regionList={regionList} roleList={roleList} ref={addForm}></UserForm>\r\n            </Modal>\r\n\r\n            <Modal\r\n                visible={isUpdateVisible}\r\n                title=\"更新用户\"\r\n                okText=\"更新\"\r\n                cancelText=\"取消\"\r\n                onCancel={() => {\r\n                    setisUpdateVisible(false)\r\n                    setisUpdateDisabled(!isUpdateDisabled)\r\n                }}\r\n                onOk={() => updateFormOK()}\r\n            >\r\n                <UserForm regionList={regionList} roleList={roleList} ref={updateForm} isUpdateDisabled={isUpdateDisabled} isUpdate={true}></UserForm>\r\n            </Modal>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React,{useState} from 'react'\r\nimport { Editor } from \"react-draft-wysiwyg\";\r\nimport { convertToRaw } from 'draft-js';\r\nimport draftToHtml from 'draftjs-to-html'\r\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\r\nexport default function NewsEditor(props) {\r\n    const [editorState, setEditorState] = useState(\"\")\r\n    return (\r\n        <div style={{marginTop:50}}>\r\n               <Editor\r\n                editorState={editorState}\r\n                toolbarClassName=\"aaaaa\"\r\n                wrapperClassName=\"bbbbb\"\r\n                editorClassName=\"ccccc\"\r\n                onEditorStateChange={(editorState)=>setEditorState(editorState)}\r\n\r\n                onBlur={()=>{\r\n                    // console.log()\r\n\r\n                    props.getContent(draftToHtml(convertToRaw(editorState.getCurrentContent())))\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport { PageHeader, Steps, Button, Form, Input, Select, message,notification } from 'antd'\r\nimport style from './News.module.css'\r\nimport axios from 'axios'\r\nimport NewsEditor from '../../../components/news-manage/NewsEditor';\r\nconst { Step } = Steps;\r\nconst { Option } = Select;\r\n\r\nexport default function NewsAdd(props) {\r\n    const [current, setCurrent] = useState(0)\r\n    const [categoryList, setCategoryList] = useState([])\r\n\r\n    const [formInfo, setformInfo] = useState({})\r\n    const [content, setContent] = useState(\"\")\r\n\r\n    const User = JSON.parse(localStorage.getItem(\"token\"))\r\n    const handleNext = () => {\r\n        if (current === 0) {\r\n            NewsForm.current.validateFields().then(res => {\r\n                // console.log(res)\r\n                setformInfo(res)\r\n                setCurrent(current + 1)\r\n            }).catch(error => {\r\n                console.log(error)\r\n            })\r\n        } else {\r\n            // console.log(content)\r\n            if (content === \"\" || content.trim() === \"<p></p>\") {\r\n                message.error(\"新闻内容不能为空\")\r\n            } else {\r\n                setCurrent(current + 1)\r\n            }\r\n        }\r\n    }\r\n    const handlePrevious = () => {\r\n        setCurrent(current - 1)\r\n    }\r\n\r\n    const layout = {\r\n        labelCol: { span: 4 },\r\n        wrapperCol: { span: 20 },\r\n    }\r\n\r\n    const NewsForm = useRef(null)\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/categories\").then(res => {\r\n            // console.log(res.data)\r\n            setCategoryList(res.data)\r\n        })\r\n    }, [])\r\n\r\n\r\n    const handleSave = (auditState) => {\r\n\r\n        axios.post('/news', {\r\n            ...formInfo,\r\n            \"content\": content,\r\n            \"region\": User.region?User.region:\"全球\",\r\n            \"author\": User.username,\r\n            \"roleId\": User.roleId,\r\n            \"auditState\": auditState,\r\n            \"publishState\": 0,\r\n            \"createTime\": Date.now(),\r\n            \"star\": 0,\r\n            \"view\": 0,\r\n            // \"publishTime\": 0\r\n        }).then(res=>{\r\n            props.history.push(auditState===0?'/news-manage/draft':'/audit-manage/list')\r\n\r\n            notification.info({\r\n                message: `通知`,\r\n                description:\r\n                  `您可以到${auditState===0?'草稿箱':'审核列表'}中查看您的新闻`,\r\n                placement:\"bottomRight\",\r\n            });\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <PageHeader\r\n                className=\"site-page-header\"\r\n                title=\"撰写新闻\"\r\n                subTitle=\"This is a subtitle\"\r\n            />\r\n\r\n            <Steps current={current}>\r\n                <Step title=\"基本信息\" description=\"新闻标题，新闻分类\" />\r\n                <Step title=\"新闻内容\" description=\"新闻主体内容\" />\r\n                <Step title=\"新闻提交\" description=\"保存草稿或者提交审核\" />\r\n            </Steps>\r\n\r\n\r\n            <div style={{ marginTop: \"50px\" }}>\r\n                <div className={current === 0 ? '' : style.active}>\r\n\r\n                    <Form\r\n                        {...layout}\r\n                        name=\"basic\"\r\n                        ref={NewsForm}\r\n                    >\r\n                        <Form.Item\r\n                            label=\"新闻标题\"\r\n                            name=\"title\"\r\n                            rules={[{ required: true, message: 'Please input your username!' }]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            label=\"新闻分类\"\r\n                            name=\"categoryId\"\r\n                            rules={[{ required: true, message: 'Please input your username!' }]}\r\n                        >\r\n                            <Select>\r\n                                {\r\n                                    categoryList.map(item =>\r\n                                        <Option value={item.id} key={item.id}>{item.title}</Option>\r\n                                    )\r\n                                }\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n                    </Form>\r\n                </div>\r\n\r\n                <div className={current === 1 ? '' : style.active}>\r\n                    <NewsEditor getContent={(value) => {\r\n                        // console.log(value)\r\n                        setContent(value)\r\n                    }}></NewsEditor>\r\n                </div>\r\n                <div className={current === 2 ? '' : style.active}></div>\r\n\r\n            </div>\r\n            <div style={{ marginTop: \"50px\" }}>\r\n                {\r\n                    current === 2 && <span>\r\n                        <Button type=\"primary\" onClick={() => handleSave(0)}>保存草稿箱</Button>\r\n                        <Button danger onClick={() => handleSave(1)}>提交审核</Button>\r\n                    </span>\r\n                }\r\n                {\r\n                    current < 2 && <Button type=\"primary\" onClick={handleNext}>下一步</Button>\r\n                }\r\n                {\r\n                    current > 0 && <Button onClick={handlePrevious}>上一步</Button>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Table, Modal,notification} from 'antd'\r\nimport axios from 'axios'\r\nimport { DeleteOutlined, EditOutlined, ExclamationCircleOutlined,UploadOutlined } from '@ant-design/icons'\r\nconst { confirm } = Modal\r\nexport default function NewsDraft(props) {\r\n    const [dataSource, setdataSource] = useState([])\r\n\r\n    const {username}  = JSON.parse(localStorage.getItem(\"token\"))\r\n    useEffect(() => {\r\n        axios.get(`/news?author=${username}&auditState=0&_expand=category`).then(res => {\r\n            const list = res.data\r\n            setdataSource(list)\r\n        })\r\n    }, [username])\r\n\r\n    const columns = [\r\n        {\r\n            title: 'ID',\r\n            dataIndex: 'id',\r\n            render: (id) => {\r\n                return <b>{id}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '新闻标题',\r\n            dataIndex: 'title',\r\n            render:(title,item) => {\r\n                return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n            }\r\n        },\r\n        {\r\n            title: '作者',\r\n            dataIndex: 'author'\r\n        },\r\n        {\r\n            title: '分类',\r\n            dataIndex: 'category',\r\n            render:(category)=>{\r\n                return category.title\r\n            }\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button danger shape=\"circle\" icon={<DeleteOutlined />} onClick={() => confirmMethod(item)} />\r\n                    \r\n                    <Button shape=\"circle\" icon={<EditOutlined />} onClick={()=>{props.history.push(`/news-manage/update/${item.id}`)} }/>\r\n\r\n                    <Button type=\"primary\" shape=\"circle\" icon={<UploadOutlined />} onClick={() => handleCheck(item.id)}/>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n    const handleCheck = (id) => {\r\n        axios.patch(`/news/${id}`,{\r\n            auditState:1\r\n        }).then(res=>{\r\n            props.history.push('/audit-manage/list')\r\n            notification.info({\r\n                message: `通知`,\r\n                description:\r\n                  `您可以到${'审核列表'}中查看您的新闻`,\r\n                placement:\"bottomRight\"\r\n            });\r\n        })\r\n    }\r\n    const confirmMethod = (item) => {\r\n        confirm({\r\n            title: '你确定要删除?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: 'Some descriptions',\r\n            onOk() {\r\n                //   console.log('OK');\r\n                deleteMethod(item)\r\n            },\r\n            onCancel() {\r\n                //   console.log('Cancel');\r\n            },\r\n        });\r\n\r\n    }\r\n    //删除\r\n    const deleteMethod = (item) => {\r\n        // console.log(item)\r\n        // 当前页面同步状态 + 后端同步\r\n      \r\n        setdataSource(dataSource.filter(data => data.id !== item.id))\r\n        axios.delete(`/news/${item.id}`)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Table dataSource={dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }} \r\n                rowKey={item=>item.id}\r\n                />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect,useRef,useContext } from 'react'\r\nimport { Button, Table, Modal,Form,Input } from 'antd'\r\nimport axios from 'axios'\r\nimport { DeleteOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nconst { confirm } = Modal\r\nexport default function NewsCategory() {\r\n    const [dataSource, setdataSource] = useState([])\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/categories\").then(res => {\r\n            setdataSource(res.data)\r\n        })\r\n    }, [])\r\n\r\n    const handleSave = (record)=>{\r\n        // console.log(record)\r\n\r\n        setdataSource(dataSource.map(item=>{\r\n            if(item.id===record.id){\r\n                return {\r\n                    id:item.id,\r\n                    title:record.title,\r\n                    value:record.title\r\n                }\r\n            }\r\n            return item\r\n        }))\r\n\r\n        axios.patch(`/categories/${record.id}`,{\r\n            title:record.title,\r\n            value:record.title\r\n        })\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'ID',\r\n            dataIndex: 'id',\r\n            render: (id) => {\r\n                return <b>{id}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '栏目名称',\r\n            dataIndex: 'title',\r\n            onCell: (record) => ({\r\n                record,\r\n                editable: true,\r\n                dataIndex: 'title',\r\n                title: '栏目名称',\r\n                handleSave: handleSave,\r\n              }),\r\n      \r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button danger shape=\"circle\" icon={<DeleteOutlined />} onClick={() => confirmMethod(item)} />\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n\r\n    const confirmMethod = (item) => {\r\n        confirm({\r\n            title: '你确定要删除?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: 'Some descriptions',\r\n            onOk() {\r\n                //   console.log('OK');\r\n                deleteMethod(item)\r\n            },\r\n            onCancel() {\r\n                //   console.log('Cancel');\r\n            },\r\n        });\r\n\r\n    }\r\n    //删除\r\n    const deleteMethod = (item) => {\r\n        // console.log(item)\r\n        // 当前页面同步状态 + 后端同步\r\n        setdataSource(dataSource.filter(data => data.id !== item.id))\r\n        axios.delete(`/categories/${item.id}`)\r\n    }\r\n\r\n    const EditableContext = React.createContext(null);\r\n\r\n    const EditableRow = ({ index, ...props }) => {\r\n        const [form] = Form.useForm();\r\n        return (\r\n            <Form form={form} component={false}>\r\n                <EditableContext.Provider value={form}>\r\n                    <tr {...props} />\r\n                </EditableContext.Provider>\r\n            </Form>\r\n        );\r\n    };\r\n\r\n    const EditableCell = ({\r\n        title,\r\n        editable,\r\n        children,\r\n        dataIndex,\r\n        record,\r\n        handleSave,\r\n        ...restProps\r\n    }) => {\r\n        const [editing, setEditing] = useState(false);\r\n        const inputRef = useRef(null);\r\n        const form = useContext(EditableContext);\r\n        useEffect(() => {\r\n            if (editing) {\r\n                inputRef.current.focus();\r\n            }\r\n        }, [editing]);\r\n\r\n        const toggleEdit = () => {\r\n            setEditing(!editing);\r\n            form.setFieldsValue({\r\n                [dataIndex]: record[dataIndex],\r\n            });\r\n        };\r\n\r\n        const save = async () => {\r\n            try {\r\n                const values = await form.validateFields();\r\n                toggleEdit();\r\n                handleSave({ ...record, ...values });\r\n            } catch (errInfo) {\r\n                console.log('Save failed:', errInfo);\r\n            }\r\n        };\r\n\r\n        let childNode = children;\r\n\r\n        if (editable) {\r\n            childNode = editing ? (\r\n                <Form.Item\r\n                    style={{\r\n                        margin: 0,\r\n                    }}\r\n                    name={dataIndex}\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: `${title} is required.`,\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Input ref={inputRef} onPressEnter={save} onBlur={save} />\r\n                </Form.Item>\r\n            ) : (\r\n                    <div\r\n                        className=\"editable-cell-value-wrap\"\r\n                        style={{\r\n                            paddingRight: 24,\r\n                        }}\r\n                        onClick={toggleEdit}\r\n                    >\r\n                        {children}\r\n                    </div>\r\n                );\r\n        }\r\n\r\n        return <td {...restProps}>{childNode}</td>;\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Table dataSource={dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }}\r\n                rowKey={item => item.id}\r\n\r\n                components={{\r\n                    body: {\r\n                        row: EditableRow,\r\n                        cell: EditableCell,\r\n                    }\r\n                }}\r\n\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Button, Table} from 'antd'\r\n\r\nexport default function NewsPublish(props) {\r\n\r\n    const columns = [\r\n        {\r\n            title: '新闻标题',\r\n            dataIndex: 'title',\r\n            render: (title,item) => {\r\n                return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n            }\r\n        },\r\n        {\r\n            title: '作者',\r\n            dataIndex: 'author'\r\n        },\r\n        {\r\n            title: \"新闻分类\",\r\n            dataIndex: 'category',\r\n            render: (category) => {\r\n                return <div>{category.title}</div>\r\n            }\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    <Button>button</Button>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <Table dataSource={props.dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }} \r\n                rowKey={item=>item.id}\r\n                />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport { PageHeader, Steps, Button, Form, Input, Select, message,notification } from 'antd'\r\nimport style from './News.module.css'\r\nimport axios from 'axios'\r\nimport NewsEditor from '../../../components/news-manage/NewsEditor';\r\nconst { Step } = Steps;\r\nconst { Option } = Select;\r\n\r\nexport default function NewsUpdate(props) {\r\n    const [current, setCurrent] = useState(0)\r\n    const [categoryList, setCategoryList] = useState([])\r\n\r\n    const [formInfo, setformInfo] = useState({})\r\n    const [content, setContent] = useState(\"\")\r\n\r\n    // const User = JSON.parse(localStorage.getItem(\"token\"))\r\n    const handleNext = () => {\r\n        if (current === 0) {\r\n            NewsForm.current.validateFields().then(res => {\r\n                // console.log(res)\r\n                setformInfo(res)\r\n                setCurrent(current + 1)\r\n            }).catch(error => {\r\n                console.log(error)\r\n            })\r\n        } else {\r\n            // console.log(content)\r\n            if (content === \"\" || content.trim() === \"<p></p>\") {\r\n                message.error(\"新闻内容不能为空\")\r\n            } else {\r\n                setCurrent(current + 1)\r\n            }\r\n        }\r\n    }\r\n    const handlePrevious = () => {\r\n        setCurrent(current - 1)\r\n    }\r\n\r\n    const layout = {\r\n        labelCol: { span: 4 },\r\n        wrapperCol: { span: 20 },\r\n    }\r\n\r\n    const NewsForm = useRef(null)\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/categories\").then(res => {\r\n            // console.log(res.data)\r\n            setCategoryList(res.data)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        // console.log()\r\n        axios.get(`/news/${props.match.params.id}?_expand=category&_expand=role`).then(res => {\r\n            // setnewsInfo(res.data)\r\n\r\n            // content , \r\n            // formInfo \r\n            let {title,categoryId,content} = res.data\r\n            NewsForm.current.setFieldsValue({\r\n                title,\r\n                categoryId\r\n            })\r\n\r\n            setContent(content)\r\n        })\r\n    }, [props.match.params.id])\r\n\r\n\r\n    const handleSave = (auditState) => {\r\n\r\n        axios.patch(`/news/${props.match.params.id}`, {\r\n            ...formInfo,\r\n            \"content\": content,\r\n            \"auditState\": auditState,\r\n        }).then(res=>{\r\n            props.history.push(auditState===0?'/news-manage/draft':'/audit-manage/list')\r\n\r\n            notification.info({\r\n                message: `通知`,\r\n                description:\r\n                  `您可以到${auditState===0?'草稿箱':'审核列表'}中查看您的新闻`,\r\n                placement:\"bottomRight\"\r\n            });\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <PageHeader\r\n                className=\"site-page-header\"\r\n                title=\"更新新闻\"\r\n                onBack={()=>props.history.goBack()}\r\n                subTitle=\"This is a subtitle\"\r\n            />\r\n\r\n            <Steps current={current}>\r\n                <Step title=\"基本信息\" description=\"新闻标题，新闻分类\" />\r\n                <Step title=\"新闻内容\" description=\"新闻主体内容\" />\r\n                <Step title=\"新闻提交\" description=\"保存草稿或者提交审核\" />\r\n            </Steps>\r\n\r\n\r\n            <div style={{ marginTop: \"50px\" }}>\r\n                <div className={current === 0 ? '' : style.active}>\r\n\r\n                    <Form\r\n                        {...layout}\r\n                        name=\"basic\"\r\n                        ref={NewsForm}\r\n                    >\r\n                        <Form.Item\r\n                            label=\"新闻标题\"\r\n                            name=\"title\"\r\n                            rules={[{ required: true, message: 'Please input your username!' }]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            label=\"新闻分类\"\r\n                            name=\"categoryId\"\r\n                            rules={[{ required: true, message: 'Please input your username!' }]}\r\n                        >\r\n                            <Select>\r\n                                {\r\n                                    categoryList.map(item =>\r\n                                        <Option value={item.id} key={item.id}>{item.title}</Option>\r\n                                    )\r\n                                }\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n                    </Form>\r\n                </div>\r\n\r\n                <div className={current === 1 ? '' : style.active}>\r\n                    <NewsEditor getContent={(value) => {\r\n                        // console.log(value)\r\n                        setContent(value)\r\n                    }} content={content}></NewsEditor>\r\n                </div>\r\n                <div className={current === 2 ? '' : style.active}></div>\r\n\r\n            </div>\r\n            <div style={{ marginTop: \"50px\" }}>\r\n                {\r\n                    current === 2 && <span>\r\n                        <Button type=\"primary\" onClick={() => handleSave(0)}>保存草稿箱</Button>\r\n                        <Button danger onClick={() => handleSave(1)}>提交审核</Button>\r\n                    </span>\r\n                }\r\n                {\r\n                    current < 2 && <Button type=\"primary\" onClick={handleNext}>下一步</Button>\r\n                }\r\n                {\r\n                    current > 0 && <Button onClick={handlePrevious}>上一步</Button>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport Home from '../../views/sandbox/home/Home'\r\nimport Nopermission from '../../views/sandbox/nopermission/Nopermission'\r\nimport RightList from '../../views/sandbox/right-manage/RightList'\r\nimport RoleList from '../../views/sandbox/right-manage/RoleList'\r\nimport UserList from '../../views/sandbox/user-manage/UserList'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport NewsAdd from '../../views/sandbox/news-manage/NewsAdd'\r\nimport NewsDraft from '../../views/sandbox/news-manage/NewsDraft'\r\nimport NewsCategory from '../../views/sandbox/news-manage/NewsCategory'\r\nimport Audit from '../../views/sandbox/audit-manage/Audit'\r\nimport AuditList from '../../views/sandbox/audit-manage/AuditList'\r\nimport Unpublished from '../../views/sandbox/publish-manage/Unpublished'\r\nimport Published from '../../views/sandbox/publish-manage/Published'\r\nimport Sunset from '../../views/sandbox/publish-manage/Sunset'\r\nimport axios from 'axios'\r\nimport NewsPreview from '../../views/sandbox/news-manage/NewsPreview'\r\nimport NewsUpdate from '../../views/sandbox/news-manage/NewsUpdate'\r\n\r\nconst LocalRouterMap = {\r\n    \"/home\":Home,\r\n    \"/user-manage/list\":UserList,\r\n    \"/right-manage/role/list\":RoleList,\r\n    \"/right-manage/right/list\":RightList,\r\n    \"/news-manage/add\":NewsAdd,\r\n    \"/news-manage/draft\":NewsDraft,\r\n    \"/news-manage/category\":NewsCategory,\r\n    '/news-manage/preview/:id':NewsPreview,\r\n    '/news-manage/update/:id':NewsUpdate,\r\n    \"/audit-manage/audit\":Audit,\r\n    \"/audit-manage/list\":AuditList,\r\n    \"/publish-manage/unpublished\":Unpublished,\r\n    \"/publish-manage/published\":Published,\r\n    \"/publish-manage/sunset\":Sunset\r\n}\r\n\r\nexport default function NewsRouter() {\r\n\r\n    const [BackRouteList, setBackRouteList] = useState([])\r\n    useEffect(()=>{\r\n        Promise.all([\r\n            axios.get(\"/rights\"),\r\n            axios.get(\"/children\"),\r\n        ]).then(res=>{\r\n            // console.log(res)\r\n            setBackRouteList([...res[0].data,...res[1].data])\r\n            // console.log(BackRouteList)\r\n        })\r\n    },[])\r\n\r\n    const {role:{rights}} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n    const checkRoute = (item)=>{\r\n        return LocalRouterMap[item.key] && (item.pagepermisson || item.routepermisson)\r\n    }\r\n\r\n    const checkUserPermission = (item)=>{\r\n        return rights.includes(item.key)\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            {\r\n                BackRouteList.map(item=>\r\n                    {\r\n                        if(checkRoute(item) && checkUserPermission(item)){\r\n                            return <Route path={item.key} key={item.key} component={LocalRouterMap[item.key]} exact/> \r\n                        }\r\n                        return null\r\n                    }   \r\n                )\r\n            }\r\n\r\n            <Redirect from=\"/\" to=\"/home\" exact />\r\n            {\r\n                BackRouteList.length>0 && <Route path=\"*\" component={Nopermission} />\r\n            }\r\n        </Switch>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Button } from 'antd';\r\n// import axios from 'axios'\r\nexport default function Home() {\r\n\r\n    const ajax = ()=>{\r\n        //取数据  get\r\n        // axios.get(\"http://localhost:8000/posts/2\").then(res=>{\r\n        //     console.log(res.data)\r\n        // })\r\n\r\n        // 增  post\r\n        // axios.post(\"http://localhost:8000/posts\",{\r\n        //     title:\"33333\",\r\n        //     author:\"xiaoming\"\r\n        // })\r\n\r\n        // 更新 put\r\n\r\n        // axios.put(\"http://localhost:8000/posts/1\",{\r\n        //     title:\"1111-修改\"\r\n        // })\r\n\r\n        // 更新 patch\r\n        // axios.patch(\"http://localhost:8000/posts/1\",{\r\n        //     title:\"1111-修改-11111\"\r\n        // }) \r\n\r\n        // 删除  delete\r\n        // axios.delete(\"http://localhost:8000/posts/1\")\r\n    \r\n        // _embed\r\n        // axios.get(\"http://localhost:8000/posts?_embed=comments\").then(res=>{\r\n        //     console.log(res.data)\r\n        // })\r\n\r\n        // _expand\r\n        // axios.get(\"http://localhost:8000/comments?_expand=post\").then(res=>{\r\n        //     console.log(res.data)\r\n        // })\r\n    }\r\n    return (\r\n        <div>\r\n            <Button type=\"primary\" onClick={ajax}>Button</Button>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { PageHeader, Descriptions } from 'antd';\r\nimport moment from 'moment'\r\nimport axios from 'axios';\r\n\r\nexport default function NewsPreview(props) {\r\n    const [newsInfo, setnewsInfo] = useState(null)\r\n    useEffect(() => {\r\n        // console.log()\r\n        axios.get(`/news/${props.match.params.id}?_expand=category&_expand=role`).then(res => {\r\n            setnewsInfo(res.data)\r\n        })\r\n    }, [props.match.params.id])\r\n\r\n    const auditList = [\"未审核\", '审核中', '已通过', '未通过']\r\n    const publishList = [\"未发布\", '待发布', '已上线', '已下线']\r\n    return (\r\n        <div>\r\n            {\r\n                newsInfo && <div>\r\n\r\n                    <PageHeader\r\n                        onBack={() => window.history.back()}\r\n                        title={newsInfo.title}\r\n                        subTitle={newsInfo.category.title}\r\n                    >\r\n                        <Descriptions size=\"small\" column={3}>\r\n                            <Descriptions.Item label=\"创建者\">{newsInfo.author}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"创建时间\">{moment(newsInfo.createTime).format(\"YYYY/MM/DD HH:mm:ss\")}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"发布时间\">{\r\n                                newsInfo.publishTime ? moment(newsInfo.publishTime).format(\"YYYY/MM/DD HH:mm:ss\") : \"-\"\r\n                            }</Descriptions.Item>\r\n                            <Descriptions.Item label=\"区域\">{newsInfo.region}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"审核状态\" ><span style={{ color: \"red\" }}>{auditList[newsInfo.auditState]}</span></Descriptions.Item>\r\n                            <Descriptions.Item label=\"发布状态\" ><span style={{ color: \"red\" }}>{publishList[newsInfo.publishState]}</span></Descriptions.Item>\r\n                            <Descriptions.Item label=\"访问数量\">{newsInfo.view}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"点赞数量\">{newsInfo.star}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"评论数量\">0</Descriptions.Item>\r\n\r\n                        </Descriptions>\r\n                    </PageHeader>\r\n\r\n                    <div dangerouslySetInnerHTML={{\r\n                        __html:newsInfo.content\r\n                    }} style={{\r\n                        margin:\"0 24px\",\r\n                        border:\"1px solid gray\"\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>  \r\n    )\r\n}\r\n","import React,{useState,useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport {Table,Button,notification} from 'antd'\r\n\r\nexport default function Audit() {\r\n    const [dataSource, setdataSource] = useState([])\r\n    const {roleId,region,username}  = JSON.parse(localStorage.getItem(\"token\"))\r\n    useEffect(()=>{\r\n        const roleObj = {\r\n            \"1\":\"superadmin\",\r\n            \"2\":\"admin\",\r\n            \"3\":\"editor\"\r\n        }\r\n        axios.get(`/news?auditState=1&_expand=category`).then(res => {\r\n            const list = res.data\r\n            setdataSource(roleObj[roleId]===\"superadmin\"?list:[\r\n                ...list.filter(item=>item.author===username),\r\n                ...list.filter(item=>item.region===region&& roleObj[item.roleId]===\"editor\")\r\n            ])\r\n        })\r\n    },[roleId,region,username])\r\n\r\n    const columns = [\r\n        {\r\n            title: '新闻标题',\r\n            dataIndex: 'title',\r\n            render: (title,item) => {\r\n                return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n            }\r\n        },\r\n        {\r\n            title: '作者',\r\n            dataIndex: 'author'\r\n        },\r\n        {\r\n            title: \"新闻分类\",\r\n            dataIndex: 'category',\r\n            render: (category) => {\r\n                return <div>{category.title}</div>\r\n            }\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                   <Button type=\"primary\" onClick={()=>handleAudit(item,2,1)}>通过</Button>\r\n                   <Button danger onClick={()=>handleAudit(item,3,0)}>驳回</Button>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n    const handleAudit = (item,auditState,publishState)=>{\r\n        setdataSource(dataSource.filter(data=>data.id!==item.id))\r\n\r\n        axios.patch(`/news/${item.id}`,{\r\n            auditState,\r\n            publishState\r\n        }).then(res=>{\r\n            notification.info({\r\n                message: `通知`,\r\n                description:\r\n                  `您可以到[审核管理/审核列表]中查看您的新闻的审核状态`,\r\n                placement:\"bottomRight\"\r\n            });\r\n        })\r\n    }\r\n    return (\r\n        <div>\r\n                <Table dataSource={dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }} \r\n                \r\n                rowKey={item=>item.id}\r\n                />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport {Table,Button,Tag,notification} from 'antd'\r\nimport axios from 'axios'\r\nexport default function AuditList(props) {\r\n    const [dataSource, setdataSource] = useState([])\r\n    const {username} = JSON.parse(localStorage.getItem(\"token\"))\r\n    useEffect(()=>{\r\n        axios(`/news?author=${username}&auditState_ne=0&publishState_lte=1&_expand=category`).then(res=>{\r\n            console.log(res.data)\r\n            setdataSource(res.data)\r\n        })\r\n    },[username])\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: '新闻标题',\r\n            dataIndex: 'title',\r\n            render: (title,item) => {\r\n                return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n            }\r\n        },\r\n        {\r\n            title: '作者',\r\n            dataIndex: 'author'\r\n        },\r\n        {\r\n            title: \"新闻分类\",\r\n            dataIndex: 'category',\r\n            render: (category) => {\r\n                return <div>{category.title}</div>\r\n            }\r\n        },\r\n        {\r\n            title: \"审核状态\",\r\n            dataIndex: 'auditState',\r\n            render: (auditState) => {\r\n                const colorList = [\"\",'orange','green','red']\r\n                const auditList = [\"草稿箱\",\"审核中\",\"已通过\",\"未通过\"]\r\n                return <Tag color={colorList[auditState]}>{auditList[auditState]}</Tag>\r\n            }\r\n        },\r\n        {\r\n            title: \"操作\",\r\n            render: (item) => {\r\n                return <div>\r\n                    {\r\n                        item.auditState===1 &&  <Button onClick={()=>handleRervert(item)} >撤销</Button>\r\n                    }\r\n                    {\r\n                        item.auditState===2 &&  <Button  danger onClick={()=>handlePublish(item)}>发布</Button>\r\n                    }\r\n                    {\r\n                        item.auditState===3 &&  <Button type=\"primary\" onClick={()=>handleUpdate(item)}>更新</Button>\r\n                    }\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n    const handleRervert = (item)=>{\r\n        setdataSource(dataSource.filter(data=>data.id!==item.id))\r\n\r\n        axios.patch(`/news/${item.id}`,{\r\n            auditState:0\r\n        }).then(res=>{\r\n            notification.info({\r\n                message: `通知`,\r\n                description:\r\n                  `您可以到草稿箱中查看您的新闻`,\r\n                placement:\"bottomRight\"\r\n            });\r\n  \r\n        })\r\n    }\r\n\r\n    const handleUpdate = (item)=>{\r\n        props.history.push(`/news-manage/update/${item.id}`)\r\n    }\r\n\r\n    const handlePublish = (item)=>{\r\n        axios.patch(`/news/${item.id}`, {\r\n            \"publishState\": 2\r\n        }).then(res=>{\r\n            props.history.push('/publish-manage/published')\r\n\r\n            notification.info({\r\n                message: `通知`,\r\n                description:\r\n                  `您可以到【发布管理/已经发布】中查看您的新闻`,\r\n                placement:\"bottomRight\"\r\n            });\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Table dataSource={dataSource} columns={columns}\r\n                pagination={{\r\n                    pageSize: 5\r\n                }} \r\n                \r\n                rowKey={item=>item.id}\r\n                />\r\n        </div>\r\n    )\r\n}\r\n","import React,{useEffect, useState} from 'react'\r\nimport axios from 'axios'\r\nimport NewsPublish from '../../../components/publish-manage/NewsPublish'\r\nexport default function Unpublished() {\r\n\r\n    const {username} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n    const [dataSource, setdataSource] = useState([])\r\n    useEffect(() => {\r\n\r\n        axios(`/news?author=${username}&publishState=1&_expand=category`).then(res=>{\r\n            // console.log(res.data)\r\n            setdataSource(res.data)\r\n        })\r\n    }, [username])\r\n\r\n    return (\r\n        <div>\r\n            <NewsPublish dataSource={dataSource}></NewsPublish>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useEffect, useState} from 'react'\r\nimport axios from 'axios'\r\nimport NewsPublish from '../../../components/publish-manage/NewsPublish'\r\nexport default function Published() {\r\n\r\n    const {username} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n    const [dataSource, setdataSource] = useState([])\r\n    useEffect(() => {\r\n\r\n        axios(`/news?author=${username}&publishState=2&_expand=category`).then(res=>{\r\n            // console.log(res.data)\r\n            setdataSource(res.data)\r\n        })\r\n    }, [username])\r\n\r\n    return (\r\n        <div>\r\n            <NewsPublish dataSource={dataSource}></NewsPublish>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Sunset() {\r\n    return (\r\n        <div>\r\n            Sunset\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport SideMenu from '../../components/sandbox/SideMenu'\r\nimport TopHeader from '../../components/sandbox/TopHeader'\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\n//css\r\nimport './NewsSandBox.css'\r\n\r\n//antd\r\nimport { Layout } from 'antd'\r\nimport NewsRouter from '../../components/sandbox/NewsRouter'\r\nconst {Content} = Layout\r\n\r\nexport default function NewsSandBox() {\r\n    NProgress.start()\r\n    useEffect(()=>{\r\n        NProgress.done()\r\n    })\r\n    return (\r\n        <Layout>\r\n            <SideMenu></SideMenu>\r\n            <Layout className=\"site-layout\">\r\n                <TopHeader></TopHeader>\r\n                <Content\r\n                    className=\"site-layout-background\"\r\n                    style={{\r\n                        margin: '24px 16px',\r\n                        padding: 24,\r\n                        minHeight: 280,\r\n                        overflow:\"auto\"\r\n                    }}\r\n                >\r\n                   <NewsRouter></NewsRouter>\r\n                </Content>\r\n            </Layout>\r\n        </Layout>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {HashRouter,Redirect,Route, Switch} from 'react-router-dom'\r\nimport Login from '../views/login/Login'\r\nimport NewsSandBox from '../views/sandbox/NewsSandBox'\r\nexport default function IndexRouter() {\r\n    return (\r\n        <HashRouter>\r\n            <Switch>\r\n                <Route path=\"/login\" component={Login}/>\r\n                {/* <Route path=\"/\" component={NewsSandBox}/> */}\r\n                <Route path=\"/\" render={()=>\r\n                    localStorage.getItem(\"token\")?\r\n                    <NewsSandBox ></NewsSandBox>:\r\n                    <Redirect to=\"/login\"/>\r\n                }/>\r\n            </Switch>\r\n        </HashRouter>\r\n    )\r\n}\r\n","import IndexRouter from './router/IndexRouter'\nimport './App.css'\nfunction App(){\n  return <IndexRouter></IndexRouter>\n}\nexport default App","import axios from 'axios'\r\n\r\naxios.defaults.baseURL=\"http://localhost:5000\"\r\n\r\n// axios.defaults.headers\r\n\r\n// axios.interceptors.request.use\r\n// axios.interceptors.response.use","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\nimport './util/http'\n\nReactDOM.render(\n    <App />\n  ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"News_active__15KcG\"};"],"sourceRoot":""}